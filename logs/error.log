{"timestamp": "2026-01-31T01:24:48.540955", "level": "ERROR", "message": "全局异常捕获: POST http://127.0.0.1:8000/api/v1/auth/register - 该邮箱已被注册", "logger": "app.core.exceptions", "module": "exceptions", "func_name": "global_exception_handler", "line_no": 44, "exception": "Traceback (most recent call last):\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/middleware/errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 118, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 104, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 428, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 314, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/app/api/v1/endpoint/auth.py\", line 23, in register\n    user = await UserService(uow).user_register(user_in)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/app/services/user_service.py\", line 147, in user_register\n    raise ValidationError(\"该邮箱已被注册\")\napp.core.exceptions.ValidationError: 该邮箱已被注册"}
{"timestamp": "2026-01-31T01:25:50.491287", "level": "ERROR", "message": "全局异常捕获: GET http://127.0.0.1:8000/api/v1/users/me - CRUDBase.get_by() takes 1 positional argument but 2 were given", "logger": "app.core.exceptions", "module": "exceptions", "func_name": "global_exception_handler", "line_no": 44, "exception": "Traceback (most recent call last):\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/middleware/errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 118, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 104, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 418, in app\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/dependencies/utils.py\", line 640, in solve_dependencies\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/dependencies/utils.py\", line 669, in solve_dependencies\n    solved = await call(**solved_result.values)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/app/api/dependencies.py\", line 67, in get_current_user\n    user = await UserRepository(session).get_by(user_id)\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nTypeError: CRUDBase.get_by() takes 1 positional argument but 2 were given"}
{"timestamp": "2026-01-31T01:25:54.362421", "level": "ERROR", "message": "全局异常捕获: GET http://127.0.0.1:8000/api/v1/users/me - CRUDBase.get_by() takes 1 positional argument but 2 were given", "logger": "app.core.exceptions", "module": "exceptions", "func_name": "global_exception_handler", "line_no": 44, "exception": "Traceback (most recent call last):\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/middleware/errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 118, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 104, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 418, in app\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/dependencies/utils.py\", line 640, in solve_dependencies\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/dependencies/utils.py\", line 669, in solve_dependencies\n    solved = await call(**solved_result.values)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/app/api/dependencies.py\", line 67, in get_current_user\n    user = await UserRepository(session).get_by(user_id)\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nTypeError: CRUDBase.get_by() takes 1 positional argument but 2 were given"}
{"timestamp": "2026-01-31T01:38:47.837438", "level": "ERROR", "message": "全局异常捕获: GET http://127.0.0.1:8000/api/v1/users/me - CRUDBase.get_by() takes 1 positional argument but 2 were given", "logger": "app.core.exceptions", "module": "exceptions", "func_name": "global_exception_handler", "line_no": 44, "exception": "Traceback (most recent call last):\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/middleware/errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 118, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 104, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 418, in app\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/dependencies/utils.py\", line 640, in solve_dependencies\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/dependencies/utils.py\", line 669, in solve_dependencies\n    solved = await call(**solved_result.values)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/app/api/dependencies.py\", line 72, in get_current_user\n    user = await UserRepository(session).get_by(user_id)\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nTypeError: CRUDBase.get_by() takes 1 positional argument but 2 were given"}
{"timestamp": "2026-01-31T01:42:16.759348", "level": "ERROR", "message": "全局异常捕获: GET http://127.0.0.1:8000/api/v1/users/me - CRUDBase.get_by() takes 1 positional argument but 2 were given", "logger": "app.core.exceptions", "module": "exceptions", "func_name": "global_exception_handler", "line_no": 44, "exception": "Traceback (most recent call last):\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/middleware/errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 118, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 104, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 418, in app\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/dependencies/utils.py\", line 640, in solve_dependencies\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/dependencies/utils.py\", line 669, in solve_dependencies\n    solved = await call(**solved_result.values)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/app/api/dependencies.py\", line 72, in get_current_user\n    user = await UserRepository(session).get_by(user_id)\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nTypeError: CRUDBase.get_by() takes 1 positional argument but 2 were given"}
{"timestamp": "2026-01-31T01:44:16.869851", "level": "ERROR", "message": "全局异常捕获: GET http://127.0.0.1:8000/api/v1/users/me - CRUDBase.get_by() takes 1 positional argument but 2 were given", "logger": "app.core.exceptions", "module": "exceptions", "func_name": "global_exception_handler", "line_no": 44, "exception": "Traceback (most recent call last):\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/middleware/errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 118, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 104, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 418, in app\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/dependencies/utils.py\", line 640, in solve_dependencies\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/dependencies/utils.py\", line 669, in solve_dependencies\n    solved = await call(**solved_result.values)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/app/api/dependencies.py\", line 72, in get_current_user\n    user = await UserRepository(session).get_by(user_id)\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nTypeError: CRUDBase.get_by() takes 1 positional argument but 2 were given"}
{"timestamp": "2026-01-31T02:01:51.369817", "level": "ERROR", "message": "全局异常捕获: PATCH http://127.0.0.1:8000/api/v1/users/019c0fef-e556-cd1b-16b7-7742fe0617cd - UserService.user_update() got an unexpected keyword argument 'user_id'", "logger": "app.core.exceptions", "module": "exceptions", "func_name": "global_exception_handler", "line_no": 44, "exception": "Traceback (most recent call last):\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/middleware/errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 118, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 104, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 428, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 314, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/app/api/v1/endpoint/user.py\", line 69, in update_user\n    updated_user = await UserService(uow).user_update(\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nTypeError: UserService.user_update() got an unexpected keyword argument 'user_id'"}
{"timestamp": "2026-01-31T02:01:54.913855", "level": "ERROR", "message": "全局异常捕获: PATCH http://127.0.0.1:8000/api/v1/users/019c0fef-e556-cd1b-16b7-7742fe0617cd - UserService.user_update() got an unexpected keyword argument 'user_id'", "logger": "app.core.exceptions", "module": "exceptions", "func_name": "global_exception_handler", "line_no": 44, "exception": "Traceback (most recent call last):\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/middleware/errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 118, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 104, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 428, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 314, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/app/api/v1/endpoint/user.py\", line 69, in update_user\n    updated_user = await UserService(uow).user_update(\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nTypeError: UserService.user_update() got an unexpected keyword argument 'user_id'"}
{"timestamp": "2026-01-31T02:06:37.148246", "level": "ERROR", "message": "全局异常捕获: PATCH http://127.0.0.1:8000/api/v1/users/019c0fef-e556-cd1b-16b7-7742fe0617cd - 'UserService' object has no attribute 'get'", "logger": "app.core.exceptions", "module": "exceptions", "func_name": "global_exception_handler", "line_no": 44, "exception": "Traceback (most recent call last):\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/middleware/errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 118, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 104, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 428, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 314, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/app/api/v1/endpoint/user.py\", line 70, in update_user\n    updated_user = await UserService(uow).get(user_id)\n                         ^^^^^^^^^^^^^^^^^^^^\nAttributeError: 'UserService' object has no attribute 'get'"}
{"timestamp": "2026-01-31T02:09:26.317600", "level": "ERROR", "message": "全局异常捕获: PATCH http://127.0.0.1:8000/api/v1/users/019c0fef-e556-cd1b-16b7-7742fe0617cd - UserService.user_update() got an unexpected keyword argument 'update_schema'", "logger": "app.core.exceptions", "module": "exceptions", "func_name": "global_exception_handler", "line_no": 44, "exception": "Traceback (most recent call last):\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/middleware/errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 118, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 104, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 428, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 314, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/app/api/v1/endpoint/user.py\", line 71, in update_user\n    updated_user = await UserService(uow).user_update(update_schema=user_in)\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nTypeError: UserService.user_update() got an unexpected keyword argument 'update_schema'"}
{"timestamp": "2026-01-31T02:10:15.447201", "level": "ERROR", "message": "全局异常捕获: PATCH http://127.0.0.1:8000/api/v1/users/019c0fef-e556-cd1b-16b7-7742fe0617cd - CRUDBase.update() missing 1 required keyword-only argument: 'db_obj'", "logger": "app.core.exceptions", "module": "exceptions", "func_name": "global_exception_handler", "line_no": 44, "exception": "Traceback (most recent call last):\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/middleware/errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 118, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 104, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 428, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 314, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/app/api/v1/endpoint/user.py\", line 71, in update_user\n    updated_user = await UserService(uow).user_update(user_in)\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/app/services/user_service.py\", line 172, in user_update\n    user = await self.uow.users.update(obj_in=user_in)\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nTypeError: CRUDBase.update() missing 1 required keyword-only argument: 'db_obj'"}
{"timestamp": "2026-01-31T02:12:13.307331", "level": "ERROR", "message": "全局异常捕获: PATCH http://127.0.0.1:8000/api/v1/users/019c0fef-e556-cd1b-16b7-7742fe0617cd - CRUDBase.update() takes 1 positional argument but 3 were given", "logger": "app.core.exceptions", "module": "exceptions", "func_name": "global_exception_handler", "line_no": 44, "exception": "Traceback (most recent call last):\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/middleware/errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 118, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 104, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 428, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 314, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/app/api/v1/endpoint/user.py\", line 71, in update_user\n    updated_user = await UserService(uow).user_update(user_in)\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/app/services/user_service.py\", line 172, in user_update\n    user = await self.uow.users.update(User, user_in)\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nTypeError: CRUDBase.update() takes 1 positional argument but 3 were given"}
{"timestamp": "2026-01-31T02:13:01.460904", "level": "ERROR", "message": "全局异常捕获: PATCH http://127.0.0.1:8000/api/v1/users/019c0fef-e556-cd1b-16b7-7742fe0617cd - Class 'sqlalchemy.orm.decl_api.DeclarativeAttributeIntercept' is not mapped; was a class (app.models.orm.user.User) supplied where an instance was required?", "logger": "app.core.exceptions", "module": "exceptions", "func_name": "global_exception_handler", "line_no": 44, "exception": "Traceback (most recent call last):\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 3463, in add\n    state = attributes.instance_state(instance)\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nAttributeError: type object 'User' has no attribute '_sa_instance_state'\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/middleware/errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 118, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 104, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 428, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 314, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/app/api/v1/endpoint/user.py\", line 71, in update_user\n    updated_user = await UserService(uow).user_update(user_in)\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/app/services/user_service.py\", line 172, in user_update\n    user = await self.uow.users.update(db_obj=User, obj_in=user_in)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/app/repositories/base.py\", line 117, in update\n    self.session.add(db_obj)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/sqlalchemy/ext/asyncio/session.py\", line 1143, in add\n    return self._proxied.add(instance, _warn=_warn)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 3465, in add\n    raise exc.UnmappedInstanceError(instance) from err\nsqlalchemy.orm.exc.UnmappedInstanceError: Class 'sqlalchemy.orm.decl_api.DeclarativeAttributeIntercept' is not mapped; was a class (app.models.orm.user.User) supplied where an instance was required?"}
{"timestamp": "2026-01-31T02:15:29.848363", "level": "ERROR", "message": "全局异常捕获: PATCH http://127.0.0.1:8000/api/v1/users/019c0fef-e556-cd1b-16b7-7742fe0617cd - Class 'sqlalchemy.orm.decl_api.DeclarativeAttributeIntercept' is not mapped; was a class (app.models.orm.user.User) supplied where an instance was required?", "logger": "app.core.exceptions", "module": "exceptions", "func_name": "global_exception_handler", "line_no": 44, "exception": "Traceback (most recent call last):\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 3129, in refresh\n    state = attributes.instance_state(instance)\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nAttributeError: type object 'User' has no attribute '_sa_instance_state'\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/middleware/errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 118, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 104, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 428, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 314, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/app/api/v1/endpoint/user.py\", line 71, in update_user\n    updated_user = await UserService(uow).user_update(user_in)\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/app/services/user_service.py\", line 172, in user_update\n    user = await self.uow.users.update(db_obj=User, obj_in=user_in)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/app/repositories/base.py\", line 118, in update\n    await self.session.refresh(db_obj)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/sqlalchemy/ext/asyncio/session.py\", line 329, in refresh\n    await greenlet_spawn(\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py\", line 190, in greenlet_spawn\n    result = context.switch(*args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 3131, in refresh\n    raise exc.UnmappedInstanceError(instance) from err\nsqlalchemy.orm.exc.UnmappedInstanceError: Class 'sqlalchemy.orm.decl_api.DeclarativeAttributeIntercept' is not mapped; was a class (app.models.orm.user.User) supplied where an instance was required?"}
{"timestamp": "2026-01-31T02:22:17.615232", "level": "ERROR", "message": "全局异常捕获: PATCH http://127.0.0.1:8000/api/v1/users/019c0fef-e556-cd1b-16b7-7742fe0617cd - Class 'sqlalchemy.orm.decl_api.DeclarativeAttributeIntercept' is not mapped; was a class (app.models.orm.user.User) supplied where an instance was required?", "logger": "app.core.exceptions", "module": "exceptions", "func_name": "global_exception_handler", "line_no": 44, "exception": "Traceback (most recent call last):\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 3463, in add\n    state = attributes.instance_state(instance)\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nAttributeError: type object 'User' has no attribute '_sa_instance_state'\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/middleware/errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 118, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 104, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 428, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 314, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/app/api/v1/endpoint/user.py\", line 71, in update_user\n    updated_user = await UserService(uow).user_update(user_in)\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/app/services/user_service.py\", line 172, in user_update\n    user = await self.uow.users.update(db_obj=User, obj_in=user_in)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/app/repositories/base.py\", line 117, in update\n    self.session.add(db_obj)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/sqlalchemy/ext/asyncio/session.py\", line 1143, in add\n    return self._proxied.add(instance, _warn=_warn)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 3465, in add\n    raise exc.UnmappedInstanceError(instance) from err\nsqlalchemy.orm.exc.UnmappedInstanceError: Class 'sqlalchemy.orm.decl_api.DeclarativeAttributeIntercept' is not mapped; was a class (app.models.orm.user.User) supplied where an instance was required?"}
{"timestamp": "2026-01-31T02:28:40.294965", "level": "ERROR", "message": "全局异常捕获: PATCH http://127.0.0.1:8000/api/v1/users/019c0fef-e556-cd1b-16b7-7742fe0617cd - UserService.user_update() missing 1 required positional argument: 'user_in'", "logger": "app.core.exceptions", "module": "exceptions", "func_name": "global_exception_handler", "line_no": 44, "exception": "Traceback (most recent call last):\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/middleware/errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 118, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 104, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 428, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 314, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/app/api/v1/endpoint/user.py\", line 71, in update_user\n    updated_user = await UserService(uow).user_update(user_in)\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nTypeError: UserService.user_update() missing 1 required positional argument: 'user_in'"}
{"timestamp": "2026-01-31T02:30:24.174763", "level": "ERROR", "message": "全局异常捕获: PATCH http://127.0.0.1:8000/api/v1/users/019c0fef-e556-cd1b-16b7-7742fe0617cd - CRUDBase.get() got an unexpected keyword argument 'ident'", "logger": "app.core.exceptions", "module": "exceptions", "func_name": "global_exception_handler", "line_no": 44, "exception": "Traceback (most recent call last):\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/middleware/errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 118, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 104, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 428, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 314, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/app/api/v1/endpoint/user.py\", line 70, in update_user\n    updated_user = await UserService(uow).user_update(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/app/services/user_service.py\", line 173, in user_update\n    db_obj = await self.uow.users.get(ident=user_id)\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nTypeError: CRUDBase.get() got an unexpected keyword argument 'ident'"}
