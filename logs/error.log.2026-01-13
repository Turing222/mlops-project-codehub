{"timestamp": "2026-01-13T00:22:01.222684", "level": "ERROR", "message": "全局异常捕获: GET http://127.0.0.1:8000/api/v1/users/users?username=test1&skip=0&limit=10 - UserRepository.get_users() got multiple values for argument 'skip'", "logger": "app.core.exceptions", "module": "exceptions", "func_name": "global_exception_handler", "line_no": 42, "exception": "Traceback (most recent call last):\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/middleware/errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 118, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 104, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 428, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 314, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/app/api/v1/endpoint/user.py\", line 48, in read_users\n    users = await repo.get_users(repo, username=username, skip=skip, limit=limit)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nTypeError: UserRepository.get_users() got multiple values for argument 'skip'"}
{"timestamp": "2026-01-13T00:22:42.445251", "level": "ERROR", "message": "全局异常捕获: GET http://127.0.0.1:8000/api/v1/users/users?username=test1&skip=0&limit=10 - UserRepository.get_users() got multiple values for argument 'skip'", "logger": "app.core.exceptions", "module": "exceptions", "func_name": "global_exception_handler", "line_no": 42, "exception": "Traceback (most recent call last):\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/middleware/errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 118, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 104, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 428, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 314, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/app/api/v1/endpoint/user.py\", line 48, in read_users\n    users = await repo.get_users(repo, username=username, skip=skip, limit=limit)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nTypeError: UserRepository.get_users() got multiple values for argument 'skip'"}
{"timestamp": "2026-01-13T00:24:54.498080", "level": "ERROR", "message": "全局异常捕获: GET http://127.0.0.1:8000/api/v1/users/users?username=test1&skip=0&limit=10 - 1 validation error:\n  {'type': 'int_type', 'loc': ('response', 0, 'id'), 'msg': 'Input should be a valid integer', 'input': UUID('019bae62-374b-91a5-1119-f9718ac477cd')}\n\n  File \"/home/tongying/workspace/mlops-project/app/api/v1/endpoint/user.py\", line 41, in read_users\n    GET /api/v1/users/users", "logger": "app.core.exceptions", "module": "exceptions", "func_name": "global_exception_handler", "line_no": 42, "exception": "Traceback (most recent call last):\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/middleware/errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 118, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 104, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 450, in app\n    content = await serialize_response(\n              ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 276, in serialize_response\n    raise ResponseValidationError(\nfastapi.exceptions.ResponseValidationError: 1 validation error:\n  {'type': 'int_type', 'loc': ('response', 0, 'id'), 'msg': 'Input should be a valid integer', 'input': UUID('019bae62-374b-91a5-1119-f9718ac477cd')}\n\n  File \"/home/tongying/workspace/mlops-project/app/api/v1/endpoint/user.py\", line 41, in read_users\n    GET /api/v1/users/users"}
{"timestamp": "2026-01-13T02:16:29.775712", "level": "ERROR", "message": "全局异常捕获: POST http://127.0.0.1:8000/api/v1/users/csv_upload - Internal server error during import", "logger": "app.core.exceptions", "module": "exceptions", "func_name": "global_exception_handler", "line_no": 42, "exception": "Traceback (most recent call last):\n  File \"/home/tongying/workspace/mlops-project/app/services/user_service.py\", line 39, in process_user_import\n    raise ValidationError(f\"以下用户名已被占用，无法注册: {existing_names}\")\napp.core.exceptions.ValidationError: 以下用户名已被占用，无法注册: {'test4', 'test3'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/middleware/errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 118, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 104, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 428, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 314, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/app/api/v1/endpoint/user.py\", line 110, in csv_balk_insert_users\n    await process_user_import(cleaned_data,repo)\n  File \"/home/tongying/workspace/mlops-project/app/services/user_service.py\", line 72, in process_user_import\n    raise ServiceError(\"Internal server error during import\") from e\napp.core.exceptions.ServiceError: Internal server error during import"}
{"timestamp": "2026-01-13T03:43:21.533995", "level": "ERROR", "message": "全局异常捕获: GET http://127.0.0.1:8000/api/v1/users/users?skip=0&limit=10 - 2 validation errors:\n  {'type': 'string_too_short', 'loc': ('response', 0, 'username'), 'msg': 'String should have at least 3 characters', 'input': '张三', 'ctx': {'min_length': 3}}\n  {'type': 'string_too_short', 'loc': ('response', 1, 'username'), 'msg': 'String should have at least 3 characters', 'input': '李四', 'ctx': {'min_length': 3}}\n\n  File \"/home/tongying/workspace/mlops-project/app/api/v1/endpoint/user.py\", line 41, in read_users\n    GET /api/v1/users/users", "logger": "app.core.exceptions", "module": "exceptions", "func_name": "global_exception_handler", "line_no": 42, "exception": "Traceback (most recent call last):\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/middleware/errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 118, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 104, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 450, in app\n    content = await serialize_response(\n              ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/tongying/workspace/mlops-project/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 276, in serialize_response\n    raise ResponseValidationError(\nfastapi.exceptions.ResponseValidationError: 2 validation errors:\n  {'type': 'string_too_short', 'loc': ('response', 0, 'username'), 'msg': 'String should have at least 3 characters', 'input': '张三', 'ctx': {'min_length': 3}}\n  {'type': 'string_too_short', 'loc': ('response', 1, 'username'), 'msg': 'String should have at least 3 characters', 'input': '李四', 'ctx': {'min_length': 3}}\n\n  File \"/home/tongying/workspace/mlops-project/app/api/v1/endpoint/user.py\", line 41, in read_users\n    GET /api/v1/users/users"}
